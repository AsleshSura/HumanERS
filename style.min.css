#backgroundCanvas,#mainCanvas,#touchCanvas{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1;pointer-events:none}#touchCanvas{z-index:2;pointer-events:auto}#mainCanvas{z-index:3;pointer-events:none}#mainInterface{position:relative;width:100vw;height:100vh;overflow:hidden}*{margin:0;padding:0;box-sizing:border-box;user-select:none;-webkit-user-select:none;-webkit-touch-callout:none}body{font-family:system-ui,-apple-system,sans-serif;overflow:hidden;background:#000;height:100vh;width:100vw;position:relative}.hidden{display:none!important}.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#012,#036);display:flex;justify-content:center;align-items:center;z-index:10000;animation:modalFade 2s ease-in-out infinite alternate}.modal-content{text-align:center;padding:3rem;border-radius:20px;background:rgba(0,20,40,.9);border:3px solid #0af;box-shadow:0 0 50px rgba(0,170,255,.5);animation:pulse 2s ease-in-out infinite}.permission-icon{font-size:4rem;margin-bottom:2rem;animation:bounce 1.5s ease-in-out infinite}.permission-symbols{font-size:2rem;margin:2rem 0;animation:symbolRotate 3s ease-in-out infinite}.start-btn{font-size:3rem;padding:1rem 2rem;background:linear-gradient(45deg,#f44,#f80);border:none;border-radius:50%;cursor:pointer;transition:all .3s ease;box-shadow:0 5px 20px rgba(255,68,68,.4)}.start-btn:hover{transform:scale(1.1);box-shadow:0 8px 30px rgba(255,68,68,.6)}#mainInterface{position:relative;width:100vw;height:100vh;overflow:hidden}#backgroundCanvas{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1}#touchCanvas{position:absolute;top:0;left:0;width:100%;height:100%;z-index:2;cursor:crosshair;touch-action:none}#statusIndicators{position:fixed;top:20px;right:20px;display:flex;flex-direction:column;gap:10px;z-index:1000}.status-dot{width:50px;height:50px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.5rem;background:rgba(50,50,50,.8);border:2px solid #666;transition:all .3s ease;backdrop-filter:blur(10px)}.status-dot.active{background:rgba(0,255,0,.3);border-color:#0f0;box-shadow:0 0 20px rgba(0,255,0,.5);animation:statusPulse 2s ease-in-out infinite}.status-dot.error{background:rgba(255,0,0,.3);border-color:red;box-shadow:0 0 20px rgba(255,0,0,.5)}#threatDisplay{position:fixed;top:50%;left:20px;transform:translateY(-50%);z-index:1000;display:flex;flex-direction:column;align-items:center;gap:20px}#threatSymbol{font-size:4rem;padding:20px;border-radius:50%;background:rgba(0,0,0,.7);border:3px solid rgba(255,255,255,.3);backdrop-filter:blur(10px);transition:all .5s ease;animation:symbolFloat 3s ease-in-out infinite}#threatMeter{width:20px;height:200px;background:linear-gradient(to top,#0f0 0,#8f0 20%,#ff0 40%,#f80 60%,#f40 80%,red 100%);border-radius:10px;border:2px solid rgba(255,255,255,.3);position:relative;overflow:hidden}#threatMeter::after{content:'';position:absolute;bottom:0;left:0;width:100%;height:var(--meter-height,80%);background:rgba(0,0,0,.8);transition:height 1s ease}#particleContainer{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:3}.particle{position:absolute;pointer-events:none;border-radius:50%;animation:particleFloat 3s linear infinite}#warningOverlay{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:4;display:flex;justify-content:center;align-items:center;flex-wrap:wrap;gap:50px}.warning-symbol{font-size:5rem;opacity:0;transform:scale(0);animation:warningAppear 1s ease-out forwards}@keyframes modalFade{0%{background:linear-gradient(135deg,#012,#036)}100%{background:linear-gradient(135deg,#036,#012)}}@keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-20px)}}@keyframes symbolRotate{0%{transform:rotate(0)}25%{transform:rotate(5deg)}75%{transform:rotate(-5deg)}100%{transform:rotate(0)}}@keyframes statusPulse{0%,100%{opacity:1}50%{opacity:.5}}@keyframes symbolFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}@keyframes particleFloat{0%{transform:translateY(100vh) scale(0);opacity:0}10%{opacity:1}90%{opacity:1}100%{transform:translateY(-100px) scale(1);opacity:0}}@keyframes warningAppear{0%{opacity:0;transform:scale(0) rotate(0)}50%{opacity:1;transform:scale(1.2) rotate(180deg)}100%{opacity:.8;transform:scale(1) rotate(360deg)}}@keyframes screenShake{0%,100%{transform:translate(0,0)}10%{transform:translate(-5px,-5px)}20%{transform:translate(5px,-5px)}30%{transform:translate(-5px,5px)}40%{transform:translate(5px,5px)}50%{transform:translate(-5px,-5px)}60%{transform:translate(5px,-5px)}70%{transform:translate(-5px,5px)}80%{transform:translate(5px,5px)}90%{transform:translate(-5px,-5px)}}.danger-max{animation:screenShake .5s infinite}.danger-max #backgroundCanvas{filter:contrast(150%) saturate(200%)}.danger-high #threatSymbol{color:#f40;box-shadow:0 0 30px rgba(255,68,0,.8)}.caution #threatSymbol{color:#fa0;box-shadow:0 0 20px rgba(255,170,0,.6)}.safe #threatSymbol{color:#0f8;box-shadow:0 0 20px rgba(0,255,136,.6)}@media (max-width:768px){.permission-icon{font-size:3rem}.permission-symbols{font-size:1.5rem}.start-btn{font-size:2.5rem;padding:.8rem 1.5rem}#threatSymbol{font-size:3rem;padding:15px}#threatMeter{height:150px;width:15px}.status-dot{width:40px;height:40px;font-size:1.2rem}#statusIndicators{top:10px;right:10px;gap:8px}.warning-symbol{font-size:3rem}}@media (max-width:480px){.modal-content{padding:2rem;margin:1rem}#threatDisplay{left:10px}}@media (prefers-reduced-motion:reduce){*{animation-duration:0s!important;animation-iteration-count:1!important;transition-duration:0s!important}}@media (prefers-contrast:high){.status-dot{border-width:3px}#threatMeter{border-width:3px}}@media print{body{display:none}}.system-loading{pointer-events:none}.system-loading #mainInterface{opacity:.7;transition:opacity .5s ease}.touch-ripple{position:absolute;border-radius:50%;background:radial-gradient(circle,rgba(255,255,255,.6),transparent);transform:scale(0);animation:rippleExpand .6s ease-out;pointer-events:none}@keyframes rippleExpand{to{transform:scale(4);opacity:0}}.particle-danger{background:radial-gradient(circle,red,#f40);animation:particleDanger 2s linear infinite}.particle-safe{background:radial-gradient(circle,#0f8,#8fa);animation:particleSafe 3s linear infinite}@keyframes particleDanger{0%{transform:translateY(100vh) rotate(0) scale(0);opacity:0}10%{opacity:1}90%{opacity:1}100%{transform:translateY(-100px) rotate(720deg) scale(1.5);opacity:0}}@keyframes particleSafe{0%{transform:translateY(100vh) rotate(0) scale(0);opacity:0}20%{opacity:.8}80%{opacity:.8}100%{transform:translateY(-100px) rotate(360deg) scale(1);opacity:0}}.emotion-panel{position:fixed;top:20px;right:20px;background:rgba(0,0,0,.9);backdrop-filter:blur(10px);border:2px solid rgba(0,255,136,.5);border-radius:15px;padding:20px;color:#fff;font-family:monospace;z-index:10000;min-width:280px;max-width:320px;visibility:visible}.emotion-panel h3{margin-bottom:15px;text-align:center;font-size:18px;color:#0f8}.emotion-bars{margin-bottom:20px}.emotion-bar{display:flex;align-items:center;margin-bottom:10px;font-size:14px}.emotion-bar label{min-width:100px;color:#ccc}.bar-container{flex:1;height:20px;background:rgba(255,255,255,.1);border-radius:10px;position:relative;overflow:hidden;margin:0 10px}.bar-fill{height:100%;background:linear-gradient(90deg,#0f8,#0c6);border-radius:10px;width:0%;transition:width .3s ease,background-color .3s ease}.bar-value{min-width:40px;text-align:right;font-size:12px;color:#aaa}#happy-bar{background:linear-gradient(90deg,#fd0,#f90)}#sad-bar{background:linear-gradient(90deg,#48f,#26c)}#angry-bar{background:linear-gradient(90deg,#f44,#c22)}#fearful-bar{background:linear-gradient(90deg,#f60,#c40)}#surprised-bar{background:linear-gradient(90deg,#ff0,#cc0)}#neutral-bar{background:linear-gradient(90deg,#888,#666)}#disgusted-bar{background:linear-gradient(90deg,#8f8,#6c6)}.overall-intensity{border-top:1px solid rgba(255,255,255,.2);padding-top:15px}.overall-intensity label{display:block;margin-bottom:10px;font-weight:700;color:#0f8}.intensity-meter{display:flex;align-items:center;height:25px}.intensity-meter .bar-container{height:25px;margin:0 10px 0 0}.intensity-fill{height:100%;background:linear-gradient(90deg,#0f8,#ff0,#f60,red);border-radius:12px;width:20%;transition:width .3s ease}.intensity-value{min-width:50px;text-align:right;font-weight:700;font-size:16px;color:#0f8}@media (max-width:768px){.emotion-panel{top:10px;right:10px;left:10px;min-width:auto;max-width:none;padding:15px}.emotion-bar{font-size:12px}.emotion-bar label{min-width:80px}}